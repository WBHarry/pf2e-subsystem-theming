<div class="menu-container">
    <header>
        <fieldset class="menu-category">
            <legend>
                {{localize "SubsystemTheming.Menus.Themes.CustomThemes.Title"}}
                <i class="pf2e-subsystem-clickable-icon fa-solid fa-plus" data-action="addTheme" title="{{localize "SubsystemTheming.Menus.Themes.Miscellaneous.AddTheme"}}"></i>
                <i class="pf2e-subsystem-clickable-icon fa-fw fas fa-file-import" data-action="importTheme" title="{{localize "SubsystemTheming.Menus.Themes.Miscellaneous.ImportTheme"}}"></i>
            </legend>

            <div class="edit-selections">
                {{#each this.customThemes}}
                    <button class="edit-selection {{#if (eq @key ../this.selectedTheme)}}active{{/if}}" data-action="selectTheme" data-theme="{{@key}}">
                        <span>{{this.name}}</span>
                        <i class="edit-selection-tools left pf2e-subsystem-clickable-icon fa-solid fa-circle-xmark" data-action="deleteTheme" data-theme="{{@key}}" title="{{localize "SubsystemTheming.Menus.Themes.Miscellaneous.DeleteTheme"}}"></i>
                        <i class="edit-selection-tools right pf2e-subsystem-clickable-icon fa-fw fas fa-file-export" data-action="exportTheme" data-theme="{{@key}}" title="{{localize "SubsystemTheming.Menus.Themes.Miscellaneous.ExportTheme"}}"></i>
                    </button>
                {{/each}}
            </div>
        </fieldset>
    </header>
    <body>
        {{#with (lookup this.customThemes this.selectedTheme)}}
            <div class="menu-title">
                <input type="text" name={{concat "customThemes." ../this.selectedTheme ".name"}} value="{{this.name}}" />
                <div class="menu-title-button">
                    <div>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.TemplateButton"}}</div>
                    <select>
                        {{selectOptions ../extendedThemes valueAttr="value" labelAttr="name" localize=true blank=""}}
                    </select>
                </div>
            </div>
            <fieldset class="menu-category">
                <legend>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.BackgroundColors"}}</legend>
                <div class="flexrow">
                    <div class="form-group">
                        <label>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.Primary"}}</label>
                        <div class="form-fields">
                            <div class="form-fields">
                                <color-picker name={{concat "customThemes." ../this.selectedTheme ".props.--pf2e-subsystem-theming-application"}} value="{{this.props.--pf2e-subsystem-theming-application}}" placeholder="#ffffff"></color-picker>
                            </div>
                        </div>
                    </div>
                    <div class="form-group full">
                        <label>{{localize "SubsystemTheming.Menus.ThemeDisplay.JournalSettings.Image"}}</label>
                        <div class="form-fields">
                            <input type="text" value="{{localize this.props.--pf2e-subsystem-theming-application-image}}" disabled />
                            <button data-action="filePicker" data-path="{{concat ../this.selectedTheme ".props.--pf2e-subsystem-theming-application-image"}}" title="{{localize "SubsystemTheming.Miscellaneous.BrowseFiles"}}"><i class="fas fa-file-import fa-fw"></i></button>
                            <button data-action="clearBackgroundImage" title="{{localize "SubsystemTheming.Miscellaneous.ClearFile"}}" data-theme="--pf2e-subsystem-theming-application-image"><i class="fa-solid fa-circle-xmark"></i></button>
                        </div>
                    </div>
                </div>
                {{#if (and this.props.--pf2e-subsystem-theming-application-image (not (eq this.props.--pf2e-subsystem-theming-application-image 'ignore')))}}
                    <div class="flexrow">
                        <div class="form-group">
                            <label>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.BackgroundSize"}}</label>
                            <div class="form-fields">
                                <input type="text" name="{{concat "customThemes." ../this.selectedTheme ".props.--pf2e-subsystem-theming-application-image-size"}}" value="{{this.props.--pf2e-subsystem-theming-application-image-size}}" />
                            </div>
                        </div>
                        <div class="menu-input-select">
                            <select class="background-size-select" data-theme="--pf2e-subsystem-theming-application-image-size">
                                {{selectOptions ../backgroundSizeOptions valueAttr="value" labelAttr="name" localize=true blank=""}}
                            </select>
                        </div>
                    </div>
                    <div class="flexrow">
                        <div class="form-group">
                            <label>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.BackgroundRepeat"}}</label>
                            <div class="form-fields">
                                <input type="text" name="{{concat "customThemes." ../this.selectedTheme ".props.--pf2e-subsystem-theming-application-image-repeat"}}" value="{{this.props.--pf2e-subsystem-theming-application-image-repeat}}" />
                            </div>
                        </div>
                        <div class="menu-input-select">
                            <select class="background-repeat-select" data-theme="--pf2e-subsystem-theming-application-image-repeat">
                                {{selectOptions ../backgroundRepeatOptions valueAttr="value" labelAttr="name" localize=true blank=""}}
                            </select>
                        </div>
                    </div>
                     <div class="flexrow">
                        <div class="form-group">
                            <label>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.BackgroundPosition"}}</label>
                            <div class="form-fields">
                                <input type="text" name="{{concat "customThemes." ../this.selectedTheme ".props.--pf2e-subsystem-theming-application-image-position"}}" value="{{this.props.--pf2e-subsystem-theming-application-image-position}}" />
                            </div>
                        </div>
                        <div class="menu-input-select">
                            <select class="background-position-select" data-theme="--pf2e-subsystem-theming-application-image-position">
                                {{selectOptions ../backgroundPositionOptions valueAttr="value" labelAttr="name" localize=true blank=""}}
                            </select>
                        </div>
                    </div>
                {{/if}}
            </fieldset>
            <fieldset class="menu-category">
                <legend>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.HeaderColors"}}</legend>
                <div class="flexrow">
                    <div class="form-group">
                        <label>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.Primary"}}</label>
                        <div class="form-fields">
                            <div class="form-fields">
                                <color-picker name={{concat "customThemes." ../this.selectedTheme ".props.--pf2e-subsystem-theming-application-header"}} value="{{this.props.--pf2e-subsystem-theming-application-header}}" placeholder="#ffffff"></color-picker>
                            </div>
                        </div>
                    </div>
                    <div class="form-group full">
                        <label>{{localize "SubsystemTheming.Menus.ThemeDisplay.JournalSettings.Image"}}</label>
                        <div class="form-fields">
                            <input type="text" value="{{localize this.props.--pf2e-subsystem-theming-application-header-image}}" disabled />
                            <button data-action="filePicker" data-path="{{concat ../this.selectedTheme ".props.--pf2e-subsystem-theming-application-header-image"}}" title="{{localize "SubsystemTheming.Miscellaneous.BrowseFiles"}}"><i class="fas fa-file-import fa-fw"></i></button>
                            <button data-action="clearBackgroundImage" title="{{localize "SubsystemTheming.Miscellaneous.ClearFile"}}" data-theme="--pf2e-subsystem-theming-application-header-image"><i class="fa-solid fa-circle-xmark"></i></button>
                        </div>
                    </div>
                </div>
                {{#if (and this.props.--pf2e-subsystem-theming-application-header-image (not (eq this.props.--pf2e-subsystem-theming-application-header-image 'ignore')))}}
                    <div class="flexrow">
                        <div class="form-group">
                            <label>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.BackgroundSize"}}</label>
                            <div class="form-fields">
                                <input type="text" name="{{concat "customThemes." ../this.selectedTheme ".props.--pf2e-subsystem-theming-application-header-image-size"}}" value="{{this.props.--pf2e-subsystem-theming-application-header-image-size}}" />
                            </div>
                        </div>
                        <div class="menu-input-select">
                            <select class="background-size-select" data-theme="--pf2e-subsystem-theming-application-header-image-size">
                                {{selectOptions ../backgroundSizeOptions valueAttr="value" labelAttr="name" localize=true blank=""}}
                            </select>
                        </div>
                    </div>
                    <div class="flexrow">
                        <div class="form-group">
                            <label>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.BackgroundRepeat"}}</label>
                            <div class="form-fields">
                                <input type="text" name="{{concat "customThemes." ../this.selectedTheme ".props.--pf2e-subsystem-theming-application-header-image-repeat"}}" value="{{this.props.--pf2e-subsystem-theming-application-header-image-repeat}}" />
                            </div>
                        </div>
                        <div class="menu-input-select">
                            <select class="background-repeat-select" data-theme="--pf2e-subsystem-theming-application-header-image-repeat">
                                {{selectOptions ../backgroundRepeatOptions valueAttr="value" labelAttr="name" localize=true blank=""}}
                            </select>
                        </div>
                    </div>
                     <div class="flexrow">
                        <div class="form-group">
                            <label>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.BackgroundPosition"}}</label>
                            <div class="form-fields">
                                <input type="text" name="{{concat "customThemes." ../this.selectedTheme ".props.--pf2e-subsystem-theming-application-header-image-position"}}" value="{{this.props.--pf2e-subsystem-theming-application-header-image-position}}" />
                            </div>
                        </div>
                        <div class="menu-input-select">
                            <select class="background-position-select" data-theme="--pf2e-subsystem-theming-application-header-image-position">
                                {{selectOptions ../backgroundPositionOptions valueAttr="value" labelAttr="name" localize=true blank=""}}
                            </select>
                        </div>
                    </div>
                {{/if}}
            </fieldset>
            <fieldset class="menu-category">
                <legend>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.MainColors"}}</legend>
                <div class="theme-section">
                    <div class="form-group">
                        <label>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.Primary"}}</label>
                        <div class="form-fields">
                            <div class="form-fields">
                                <color-picker name={{concat "customThemes." ../this.selectedTheme ".props.--pf2e-subsystem-theming-primary"}} value="{{this.props.--pf2e-subsystem-theming-primary}}" placeholder="#ffffff"></color-picker>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.Secondary"}}</label>
                        <div class="form-fields">
                            <div class="form-fields">
                                <color-picker name={{concat "customThemes." ../this.selectedTheme ".props.--pf2e-subsystem-theming-secondary"}} value="{{this.props.--pf2e-subsystem-theming-secondary}}" placeholder="#ffffff"></color-picker>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.Tertiary"}}</label>
                        <div class="form-fields">
                            <div class="form-fields">
                                <color-picker name={{concat "customThemes." ../this.selectedTheme ".props.--pf2e-subsystem-theming-tertiary"}} value="{{this.props.--pf2e-subsystem-theming-tertiary}}" placeholder="#ffffff"></color-picker>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>
            <fieldset class="menu-category">
                <legend>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.AccentColors"}}</legend>
                <div class="theme-section">
                    <div class="form-group">
                        <label>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.Primary"}}</label>
                        <div class="form-fields">
                            <div class="form-fields">
                                <color-picker name={{concat "customThemes." ../this.selectedTheme ".props.--pf2e-subsystem-theming-primary-accent"}} value="{{this.props.--pf2e-subsystem-theming-primary-accent}}" placeholder="#ffffff"></color-picker>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.Faded"}}</label>
                        <div class="form-fields">
                            <div class="form-fields">
                                <color-picker name={{concat "customThemes." ../this.selectedTheme ".props.--pf2e-subsystem-theming-primary-faded"}} value="{{this.props.--pf2e-subsystem-theming-primary-faded}}" placeholder="#ffffff"></color-picker>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.Tertiary"}}</label>
                        <div class="form-fields">
                            <div class="form-fields">
                                <color-picker name={{concat "customThemes." ../this.selectedTheme ".props.--pf2e-subsystem-theming-tertiary-accent"}} value="{{this.props.--pf2e-subsystem-theming-tertiary-accent}}" placeholder="#ffffff"></color-picker>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>
            <fieldset class="menu-category">
                <legend>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.TextColors"}}</legend>
                <div class="theme-section">
                    <div class="form-group">
                        <label>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.Primary"}}</label>
                        <div class="form-fields">
                            <div class="form-fields">
                                <color-picker name={{concat "customThemes." ../this.selectedTheme ".props.--pf2e-subsystem-theming-primary-color"}} value="{{this.props.--pf2e-subsystem-theming-primary-color}}" placeholder="#ffffff"></color-picker>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.Shadow"}}</label>
                        <div class="form-fields">
                            <div class="form-fields">
                                <color-picker name={{concat "customThemes." ../this.selectedTheme ".props.--pf2e-subsystem-theming-text-shadow"}} value="{{this.props.--pf2e-subsystem-theming-text-shadow}}" placeholder="#ffffff"></color-picker>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>
            <fieldset class="menu-category">
                <legend>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.IconColors"}}</legend>

                <div class="theme-section">
                    <div class="form-group">
                        <label>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.Primary"}}</label>
                        <div class="form-fields">
                            <div class="form-fields">
                                <color-picker name={{concat "customThemes." ../this.selectedTheme ".props.--pf2e-subsystem-theming-icon"}} value="{{this.props.--pf2e-subsystem-theming-icon}}" placeholder="#ffffff"></color-picker>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.Secondary"}}</label>
                        <div class="form-fields">
                            <div class="form-fields">
                                <color-picker name={{concat "customThemes." ../this.selectedTheme ".props.--pf2e-subsystem-theming-secondary-icon"}} value="{{this.props.--pf2e-subsystem-theming-secondary-icon}}" placeholder="#ffffff"></color-picker>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>
            <fieldset class="menu-category">
                <legend>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.Hover"}}</legend>
                <div class="theme-section">
                    <div class="form-group">
                        <label>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.Primary"}}</label>
                        <div class="form-fields">
                            <div class="form-fields">
                                <color-picker name={{concat "customThemes." ../this.selectedTheme ".props.--pf2e-subsystem-theming-main-hover"}} value="{{this.props.--pf2e-subsystem-theming-main-hover}}" placeholder="#ffffff"></color-picker>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>
            <fieldset class="menu-category">
                <legend>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.Borders"}}</legend>
                <div class="theme-section">
                    <div class="form-group">
                        <label>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.Primary"}}</label>
                        <div class="form-fields">
                            <div class="form-fields">
                                <color-picker name={{concat "customThemes." ../this.selectedTheme ".props.--pf2e-subsystem-theming-border"}} value="{{this.props.--pf2e-subsystem-theming-border}}" placeholder="#ffffff"></color-picker>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.Secondary"}}</label>
                        <div class="form-fields">
                            <div class="form-fields">
                                <color-picker name={{concat "customThemes." ../this.selectedTheme ".props.--pf2e-subsystem-theming-secondary-border"}} value="{{this.props.--pf2e-subsystem-theming-secondary-border}}" placeholder="#ffffff"></color-picker>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>{{localize "SubsystemTheming.Menus.Themes.CustomThemes.Application"}}</label>
                        <div class="form-fields">
                            <div class="form-fields">
                                <color-picker name={{concat "customThemes." ../this.selectedTheme ".props.--pf2e-subsystem-theming-application-border"}} value="{{this.props.--pf2e-subsystem-theming-application-border}}" placeholder="#ffffff"></color-picker>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>
        {{/with}}
    </body>
    <footer class="flexrow">
        <button data-action="save">{{localize "SubsystemTheming.Miscellaneous.Save"}}</button>
    </footer>
</div>